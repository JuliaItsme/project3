DROP TABLE IF EXISTS Measurement;
DROP TABLE IF EXISTS Sensor;

CREATE TABLE Sensor
(
    id   INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    name VARCHAR(100) NOT NULL UNIQUE
);

CREATE UNIQUE INDEX sensor_unique_name_idx ON Sensor (name);

CREATE TABLE Measurement
(
    id          INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    temperature DOUBLE PRECISION        NOT NULL,
    raining     BOOLEAN                 NOT NULL,
    date_time   TIMESTAMP DEFAULT now() NOT NULL,
    sensor_name VARCHAR(100) REFERENCES Sensor (name) ON DELETE CASCADE
);